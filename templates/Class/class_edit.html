{% extends "management/base.html" %}
{% block title %}Edit Class — Siddhartha Academy{% endblock %}
{% block content %}
<h1 class="text-4xl font-extrabold mb-8 text-center mt-6 text-red-700">Edit Class</h1>

<form method="POST" class="bg-white p-8 rounded-3xl shadow-lg max-w-6xl mx-4 space-y-8">
  {% csrf_token %}
  <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
    
    <div>
      <label for="name" class="block mb-2 font-semibold text-gray-700">Class Name <span class="text-red-500">*</span></label>
      <input type="text" id="name" name="name" value="{{ class_instance.name }}" required maxlength="100"
        class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-red-500 transition" />
    </div>

    <div>
      <label for="class_teacher" class="block mb-2 font-semibold text-gray-700">Class Teacher</label>
      <select id="class_teacher" name="class_teacher" class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-red-500 transition">
        <option value="">— Select Teacher —</option>
        {% for teacher in teachers %}
        <option value="{{ teacher.id }}" {% if class_instance.class_teacher and teacher.id == class_instance.class_teacher.id %}selected{% endif %}>{{ teacher.full_name }}</option>
        {% endfor %}
      </select>
    </div>

    <div class="md:col-span-2">
      <label for="subjects" class="block mb-2 font-semibold text-gray-700">Subjects</label>
      <select id="subjects" name="subjects" multiple class="w-full border border-gray-300 rounded-lg px-4 py-3 h-40 focus:outline-none focus:ring-2 focus:ring-red-500 transition">
        {% for subject in subjects %}
        <option value="{{ subject.id }}" {% if subject in class_instance.subjects.all %}selected{% endif %}>{{ subject.name }}</option>
        {% endfor %}
      </select>
      <p class="text-xs text-gray-500 mt-1">Hold Ctrl (Windows) or Cmd (Mac) to select multiple subjects.</p>
    </div>

  </div>

  <div class="flex justify-end gap-6 mt-8 max-w-6xl mx-4">
    <a href="{% url 'class_list' %}" class="px-6 py-3 bg-gray-200 rounded-lg hover:bg-gray-300 text-gray-700 font-semibold transition">Cancel</a>
    <button type="submit" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold shadow-md transition">Update Class</button>
  </div>
</form>

{% endblock %}
