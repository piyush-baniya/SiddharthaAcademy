{% extends "core/base.html" %}
{% load static %}
{% block title %}News & Notices | Siddhartha Academy{% endblock %}
{% block content %}

<!-- Alpine.js needed for modal -->
<script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

<div 
  x-data="newsModal()" 
  x-init="
    const observer = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if(entry.isIntersecting) {
          entry.target.classList.add('opacity-100', 'translate-y-0');
          observer.unobserve(entry.target); // animate once only
        }
      });
    }, { threshold: 0.1 });

    document.querySelectorAll('.fade-up').forEach(el => observer.observe(el));
  "
  class="min-h-screen bg-gradient-to-br from-white via-red-50 to-red-100 py-12 px-4"
>

  <div class="max-w-5xl mx-auto">

    <!-- Heading -->
    <h1 class="text-4xl md:text-5xl font-extrabold text-center text-red-700 mb-12 tracking-tight drop-shadow
                opacity-0 translate-y-6 transition-all duration-700 fade-up">
      News & Notices
    </h1>

    <!-- News/Notice List -->
    <div class="space-y-8">

      <!-- News item example -->
      <article class="bg-white rounded-3xl shadow-lg p-6 hover:shadow-2xl transition duration-300
                      opacity-0 translate-y-6 transform fade-up">
        <header class="flex items-center justify-between mb-3">
          <time datetime="2025-08-08" class="text-sm text-red-600 font-semibold tracking-wide">Aug 8, 2025</time>
          <span class="bg-red-100 text-red-700 text-xs font-bold px-3 py-1 rounded-full uppercase">Notice</span>
        </header>
        <h2 class="text-2xl font-bold text-red-700 mb-2 hover:text-red-800 transition cursor-pointer">
          School Reopens on August 15, 2025
        </h2>
        <p class="text-gray-700 mb-4">
          We are excited to welcome students back for the new academic year starting August 15. Please check your class routine and get ready for an amazing year!
        </p>
        <button 
          @click="openModal('School Reopens on August 15, 2025', 'We are excited to welcome students back for the new academic year starting August 15. Please check your class routine and get ready for an amazing year!')" 
          class="text-red-600 font-semibold hover:underline cursor-pointer">
          Read More &rarr;
        </button>
      </article>

      <!-- Another news item -->
      <article class="bg-white rounded-3xl shadow-lg p-6 hover:shadow-2xl transition duration-300
                      opacity-0 translate-y-6 transform fade-up">
        <header class="flex items-center justify-between mb-3">
          <time datetime="2025-07-25" class="text-sm text-red-600 font-semibold tracking-wide">Jul 25, 2025</time>
          <span class="bg-red-100 text-red-700 text-xs font-bold px-3 py-1 rounded-full uppercase">News</span>
        </header>
        <h2 class="text-2xl font-bold text-red-700 mb-2 hover:text-red-800 transition cursor-pointer">
          Annual Science Exhibition Highlights
        </h2>
        <p class="text-gray-700 mb-4">
          The 2025 Science Exhibition showcased brilliant projects from our students, highlighting innovation and creativity. Congratulations to all participants and winners.
        </p>
        <button 
          @click="openModal('Annual Science Exhibition Highlights', 'The 2025 Science Exhibition showcased brilliant projects from our students, highlighting innovation and creativity. Congratulations to all participants and winners.')" 
          class="text-red-600 font-semibold hover:underline cursor-pointer">
          Read More &rarr;
        </button>
      </article>

      <!-- Add more news items similarly -->

    </div>

    <!-- Pagination (optional) -->
    <div class="mt-12 flex justify-center space-x-3">
      <button class="px-4 py-2 rounded-lg bg-red-600 text-white font-bold shadow hover:bg-red-700 transition" disabled>Previous</button>
      <button class="px-4 py-2 rounded-lg bg-red-600 text-white font-bold shadow hover:bg-red-700 transition">Next</button>
    </div>
  </div>

  <!-- Modal Background -->
  <div
    x-show="isOpen"
    x-transition.opacity
    class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"
    style="display: none;"
  >
    <!-- Modal Container -->
    <div
      x-show="isOpen"
      x-transition.scale.origin.center
      @click.away="closeModal()"
      class="bg-white rounded-3xl max-w-3xl w-full mx-4 p-8 shadow-2xl relative"
    >
      <button
        @click="closeModal()"
        class="absolute top-4 right-4 text-gray-500 hover:text-red-600 text-3xl font-bold focus:outline-none"
      >&times;</button>

      <h2 class="text-3xl font-extrabold text-red-700 mb-4" x-text="modalTitle"></h2>
      <p class="text-gray-800 text-lg whitespace-pre-line" x-text="modalContent"></p>
    </div>
  </div>
</div>

<script>
  function newsModal() {
    return {
      isOpen: false,
      modalTitle: '',
      modalContent: '',
      openModal(title, content) {
        this.modalTitle = title;
        this.modalContent = content;
        this.isOpen = true;
      },
      closeModal() {
        this.isOpen = false;
        this.modalTitle = '';
        this.modalContent = '';
      }
    }
  }
</script>

{% endblock %}
